{
  "info": {
    "submission": "diff --git a/django/core/management/commands/makemigrations.py b/django/core/management/commands/makemigrations.py\nindex 1234567..89abcde 100644\n--- a/django/core/management/commands/makemigrations.py\n+++ b/django/core/management/commands/makemigrations.py\n@@ -1,7 +1,19 @@\n-                if connection.settings_dict[\"ENGINE\"] != \"django.db.backends.dummy\" and any(\n-                    # At least one model must be migrated to the database.\n-                    router.allow_migrate(\n-                        connection.alias, app_label, model_name=model._meta.object_name\n-                    )\n-                    for app_label in consistency_check_labels\n-                    for model in apps.get_app_config(app_label).get_models()\n-                ):\n+                if connection.settings_dict[\"ENGINE\"] != \"django.db.backends.dummy\" and any(\n+                    # At least one model in the app must be migrated to the database.\n+                    # Call allow_migrate() only with models that belong to the app\n+                    # being checked, otherwise routers may receive invalid\n+                    # (app_label, model) combinations.\n+                    any(\n+                        router.allow_migrate(\n+                            connection.alias, app_label, model_name=model._meta.model_name\n+                        )\n+                        for model in apps.get_app_config(app_label).get_models()\n+                    )\n+                    for app_label in consistency_check_labels\n+                ):\n*** End Patch\n\nNo changes detected to generate a patch.",
    "config": {
      "agent": "swe-agent",
      "model": "gpt-5-mini"
    }
  },
  "messages": [],
  "trajectory_format": "mini-swe-agent-1",
  "instance_id": "django__django-7530"
}